---
  name: Get Weather Example
  description: Example of calling an API endpoint and getting the response body. Visit http://openweathermap.org/ for an API key.
  parameters:
    api-key: $env[OPENWEATHER_API_KEY]
    city: london
  tasks:
    Call Weather API:
      blocking: true
      handler: "../taskhandlers/requestHandler"
      data:
        options:
          url: "http://api.openweathermap.org/data/2.5/weather?q=$[parameters.city]&units=imperial&APPID=$[parameters.api-key]"
          method: "GET"
          json: true
    Report Weather:
      blocking: true
      handler: "../taskhandlers/logHandler"
      data:
        level: info
        log: "The weather in $[parameters.city] is $[tasks.Call Weather API.data.body.weather.0.description]"

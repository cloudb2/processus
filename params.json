{"name":"Processus","tagline":"A simple lightweight nodejs workflow engine designed to help orchestrate multiple tasks.","body":"# Processus\r\n\r\nProcessus is a simple lightweight workflow engine designed to help orchestrate multiple tasks.\r\n\r\nThere are many workflow engines already, but Processus makes some very specific assumptions that make it easy to quickly write simple, yet powerful\r\nworkflows.\r\n\r\n* [Installation](#installation)\r\n* [Using Processus](#using-processus)\r\n  * [Features](#features)\r\n  * [Workflow](#workflow)\r\n  * [Tasks](#tasks)\r\n  * [Testing Tasks](#testing-tasks)\r\n  * [Parallel Tasks](#parallel-tasks)\r\n  * [Nested Tasks](#nested-tasks)\r\n  * [Referencing Task Parameters](#referencing-task-parameters)\r\n  * [Referencing Workflow Parameters](#referencing-workflow-parameters)\r\n  * [Handling Errors](#handling-errors)\r\n    * [ignoreError Property](#ignoreerror-property)\r\n  * [Task Conditions - skipIf and errorIf](#task-conditions---skipif-and-errorif)\r\n  * [Pre and Post Workflow Tasks](#pre-and-post-workflow-tasks)\r\n  * [Environment Variables](#environment-variables)\r\n  * [Workflow History](#workflow-history)\r\n  * [Deleting Workflows](#deleting-workflows)\r\n  * [API](#api)\r\n  * [Handlers](#handlers)\r\n    * [execHandler](#exechandler)\r\n    * [logHandler](#loghandler)\r\n    * [testHandler](#testhandler)\r\n    * [requestHandler](#requesthandler)\r\n    * [workflowHandler](#workflowhandler)\r\n    * [conditionHandler](#conditionhandler)\r\n    * [expectHandler](#expecthandler)\r\n\r\n<hr>\r\n\r\n#Getting Started\r\n\r\n## Installation\r\n\r\nInstall using npm within your project\r\n```\r\nnpm install --save processus\r\n```\r\n\r\nInstall globally for use on the command line\r\n```\r\nnpm install -g processus\r\n```\r\n\r\nor clone this repo\r\n```\r\ngit clone https://github.com/cloudb2/processus\r\ncd processus\r\nnpm install\r\n```\r\n\r\n[top](#processus)\r\n### Usage CLI\r\n```\r\n$ ./bin/processus-cli -h\r\n\r\n  ____  ____   __    ___  ____  ____  ____  _  _  ____\r\n (  _ \\(  _ \\ /  \\  / __)(  __)/ ___)/ ___)/ )( \\/ ___)\r\n  ) __/ )   /(  O )( (__  ) _) \\___  \\___ \\) \\/ (\\___ \\\r\n (__)  (__\\_) \\__/  \\___)(____)(____/(____/\\____/(____/\r\n\r\n           Processus: A Simple Workflow Engine.\r\n\r\nUsage:\r\n  processus-cli [OPTIONS] [ARGS]\r\n\r\nOptions:\r\n  -l, --log [STRING]     Sets the log level\r\n                         [debug|verbose|info|warn|error].  (Default is error)\r\n  -f, --file STRING      Workflow or task definition. A task must also include\r\n                         the workflow ID. For YAML use .yml postfix.\r\n  -i, --id STRING        Workflow ID.\r\n  -r, --rewind NUMBER    time in reverse chronological order. 0 is current, 1\r\n                         is the previous save point etc.\r\n  -d, --delete STRING    delete a workflow instance\r\n      --deleteALL        delete ALL workflow instances.\r\n  -h, --help             Display help and usage details\r\n```\r\n\r\n[top](#processus)\r\n### Usage API\r\n```\r\nvar processus = require('processus');\r\n\r\nvar wf = {\r\n  \"name\": \"Example Workflow\",\r\n  \"description\": \"An example workflow using the API.\",\r\n  \"tasks\":{\r\n    \"task 1\": {\r\n      \"description\": \"Demo task to execute echo command.\",\r\n      \"blocking\": true,\r\n      \"handler\" : \"../taskhandlers/execHandler\",\r\n      \"parameters\": {\r\n        \"cmd\": \"echo 'Congratulations you called a workflow using the API.'\"\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\nprocessus.execute(wf, function(err, workflow){\r\n  if(!err) {\r\n    console.log(workflow.tasks['task 1']parameters.stdout);\r\n  }\r\n});\r\n\r\n```\r\n\r\n<hr>\r\n\r\n[top](#processus)\r\n## Using Processus\r\n\r\n### Features\r\n\r\n1. Define workflow in JSON or YAML\r\n2. Execute tasks in series (sequentially) or parallel\r\n3. Nested tasks\r\n4. Reference data between tasks\r\n5. Reference data from workflow to tasks\r\n6. Call a workflow from a workflow\r\n7. Extensible task handlers\r\n8. Task handlers included\r\n  * testHandler: testing Processus workflows\r\n  * execHandler: executing local commands\r\n  * workflowHandler: for calling other workflows\r\n  * requestHandler: making HTTP requests\r\n  * conditionHandler: evaluating conditional statements\r\n  * expectHandler: testing assertions with expect\r\n9. Built in persistence (file based)\r\n10. Inject workflow with additional tasks\r\n11. Support for environment variables\r\n12. Inspect executed workflows and look back through their history\r\n13. Update in-flight (paused) workflows with async callbacks\r\n\r\n[top](#processus)\r\n### Workflow\r\n\r\nA workflow in Processus is defined using JSON, which should conform to a specific structure. The best way to understand that structure is by looking at examples.\r\n\r\nA workflow, in it's simplest form, is defined as follows.\r\n```\r\n{\r\n  \"tasks\": {\r\n  },\r\n  \"id\": \"[instance UUID]\"\r\n  \"status\": \"[open|error|completed]\"\r\n}\r\n```\r\nBoth ```id``` and ```status``` are added by Processus at execution time.\r\n\r\nexecute the above example ex1.json using the following command.\r\n```\r\n../bin/processus-cli -l info -f ./test/ex1.json\r\n```\r\n\r\nYou should see something like this.\r\n```\r\n$ ./bin/processus-cli -l info -f ./test/ex1.json\r\n\r\n  ____  ____   __    ___  ____  ____  ____  _  _  ____\r\n (  _ \\(  _ \\ /  \\  / __)(  __)/ ___)/ ___)/ )( \\/ ___)\r\n  ) __/ )   /(  O )( (__  ) _) \\___  \\___ \\) \\/ (\\___ \\\r\n (__)  (__\\_) \\__/  \\___)(____)(____/(____/\\____/(____/\r\n\r\n           Processus: A Simple Workflow Engine.\r\n\r\ninfo: reading workflow file [./test/ex1.json]\r\ninfo: ✰ Workflow [./test/ex1.json] with id [6a29c781-ee00-4332-bb58-9ea779afb347] exited without error, but did not complete.\r\n```\r\n***Note***\r\n\r\n1. You can add additional meta data to the workflow such as a name and description, but that will be ignored by Processus.\r\n2. The status of a workflow can be open, error or completed.\r\n3. In this example there are no tasks, so the Processus returns open, assuming that a task will be injected later. More on this later.\r\n\r\nexecute ex1 again, this time with a log level of debug.\r\n```\r\n../bin/processus-cli -l debug -f ./test/ex1.json\r\n```\r\n\r\nYou should see something like this.\r\n```\r\n$ ./bin/processus-cli -l debug -f ./test/ex1.json\r\n\r\n  ____  ____   __    ___  ____  ____  ____  _  _  ____\r\n (  _ \\(  _ \\ /  \\  / __)(  __)/ ___)/ ___)/ )( \\/ ___)\r\n  ) __/ )   /(  O )( (__  ) _) \\___  \\___ \\) \\/ (\\___ \\\r\n (__)  (__\\_) \\__/  \\___)(____)(____/(____/\\____/(____/\r\n\r\n           Processus: A Simple Workflow Engine.\r\n\r\ninfo: reading workflow file [./test/ex1.json]\r\ndebug: checking for data directory [_data]\r\ndebug: init complete without error.\r\ndebug: save point a reached.\r\ndebug: save point c reached.\r\ndebug: Workflow returned successfully.\r\ndebug: {\r\n  \"tasks\": {},\r\n  \"status\": \"open\",\r\n  \"id\": \"307e7633-c820-4f78-b739-9af50d7a56c5\"\r\n}\r\ninfo: ✰ Workflow [./test/ex1.json] with id [307e7633-c820-4f78-b739-9af50d7a56c5] exited without error, but did not complete.\r\n```\r\n***Note***\r\n\r\n1. The status and id have been added by Processus\r\n2. The workflow remains open as there are NO tasks to execute\r\n\r\n[top](#processus)\r\n### Tasks\r\n\r\nConsider the following workflow.\r\n```\r\n{\r\n  \"tasks\": {\r\n    \"say hello\": {\r\n      \"blocking\": true,\r\n      \"handler\": \"../taskhandlers/execHandler\",\r\n      \"parameters\": {\r\n        \"cmd\": \"echo 'hello, world'\"\r\n      }\r\n    },\r\n    \"say hello again\": {\r\n      \"blocking\": true,\r\n      \"handler\": \"../taskhandlers/execHandler\",\r\n      \"parameters\": {\r\n        \"cmd\": \"echo 'hello, world again'\"\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n***Note***\r\n\r\n1. The above workflow has 2 tasks ```say hello``` and ```say hello again```.\r\n2. Each task uses a handler called ```execHandler``` which executed the command identified in the prameters property of the task by ```parameters.cmd```.\r\n3. **See .yml versions in the test directory for a YAML equivalent workflows.** e.g.\r\n```\r\n---\r\n  tasks:\r\n    say hello:\r\n      blocking: true\r\n      handler: \"../taskhandlers/execHandler\"\r\n      parameters:\r\n        cmd: \"echo 'hello, world'\"\r\n    say hello again:\r\n      blocking: true\r\n      handler: \"../taskhandlers/execHandler\"\r\n      parameters:\r\n        cmd: \"echo 'hello, world again'\"\r\n```\r\n\r\nSo, in short, this simple workflow will execute ```echo 'hello, world'``` and ```echo 'hello, world again'``` sequentially.\r\n\r\nexecute ex2.json\r\n```\r\n../bin/processus-cli -l debug -f ./test/ex2.json\r\n```\r\n\r\nYou should see something like this.\r\n```\r\n$ ./bin/processus-cli -l debug -f ./test/ex2.json\r\n\r\n  ____  ____   __    ___  ____  ____  ____  _  _  ____\r\n (  _ \\(  _ \\ /  \\  / __)(  __)/ ___)/ ___)/ )( \\/ ___)\r\n  ) __/ )   /(  O )( (__  ) _) \\___  \\___ \\) \\/ (\\___ \\\r\n (__)  (__\\_) \\__/  \\___)(____)(____/(____/\\____/(____/\r\n\r\n           Processus: A Simple Workflow Engine.\r\n\r\ninfo: reading workflow file [./test/ex2.json]\r\ndebug: checking for data directory [_data]\r\ndebug: init complete without error.\r\ndebug: save point a reached.\r\ndebug: task.skipIf = undefined\r\ndebug: task.errorIf = undefined\r\ninfo: ⧖ Starting task [say hello]\r\ndebug: stdout ➜ [hello, world\r\n]\r\ninfo: ✔ task [say hello] completed successfully.\r\ndebug: save point a reached.\r\ndebug: task.skipIf = undefined\r\ndebug: task.errorIf = undefined\r\ninfo: ⧖ Starting task [say hello again]\r\ndebug: stdout ➜ [hello, world again\r\n]\r\ninfo: ✔ task [say hello again] completed successfully.\r\ndebug: save point a reached.\r\ndebug: save point c reached.\r\ndebug: Workflow returned successfully.\r\ndebug: {\r\n  \"tasks\": {\r\n    \"say hello\": {\r\n      \"blocking\": true,\r\n      \"handler\": \"../taskhandlers/execHandler\",\r\n      \"parameters\": {\r\n        \"cmd\": \"echo 'hello, world'\",\r\n        \"stdout\": \"hello, world\\n\",\r\n        \"stderr\": \"\"\r\n      },\r\n      \"status\": \"completed\",\r\n      \"timeOpened\": 1447993811920,\r\n      \"timeStarted\": 1447993811921,\r\n      \"timeCompleted\": 1447993811950,\r\n      \"handlerDuration\": 29,\r\n      \"totalDuration\": 30\r\n    },\r\n    \"say hello again\": {\r\n      \"blocking\": true,\r\n      \"handler\": \"../taskhandlers/execHandler\",\r\n      \"parameters\": {\r\n        \"cmd\": \"echo 'hello, world again'\",\r\n        \"stdout\": \"hello, world again\\n\",\r\n        \"stderr\": \"\"\r\n      },\r\n      \"status\": \"completed\",\r\n      \"timeOpened\": 1447993811952,\r\n      \"timeStarted\": 1447993811952,\r\n      \"timeCompleted\": 1447993811963,\r\n      \"handlerDuration\": 11,\r\n      \"totalDuration\": 11\r\n    }\r\n  },\r\n  \"status\": \"completed\",\r\n  \"id\": \"baccbfbd-3c9e-48f4-981a-c3461b8d2ffd\"\r\n}\r\ninfo: ✰ Workflow [./test/ex2.json] with id [baccbfbd-3c9e-48f4-981a-c3461b8d2ffd] completed successfully.\r\n```\r\n***Note***\r\n\r\n1. The handler has added ```stdout``` and ```stderr``` to each task's ```parameters``` property.\r\n2. The status of each task and the overall workflow is shown as ```completed```\r\n3. Processus has added additional timing information to each task.\r\n4. The status of a task can be one of the following\r\n  * ```waiting``` It is waiting to be opened by Processus\r\n  * ```open``` It is opened by Processus\r\n  * ```executing``` The handler associated with this task is currently executing\r\n  * ```completed``` The task has completed successfully\r\n  * ```paused``` A handler has finished executing but a response is pending. i.e. it is expected that the workflow will be updated at some point in the future from an async callback.\r\n  * ```error``` An error occurred during execution of the handler\r\n\r\n[top](#processus)\r\n### Testing Tasks\r\n\r\nProcessus comes with a ```testHandler``` that mimics a task by waiting for a specific period of time and then returning.\r\n\r\nConsider demo1.json\r\n```\r\n{\r\n  \"tasks\":{\r\n    \"task 1\": {\r\n      \"description\": \"I am the task 1, I take 1500msecs.\",\r\n      \"blocking\": true,\r\n      \"handler\" : \"../taskhandlers/testHandler\",\r\n      \"parameters\": {\r\n        \"delay\": 1500,\r\n        \"error\": false\r\n      }\r\n    },\r\n    \"task 2\": {\r\n      \"description\": \"I am the task 2, I take 1000msecs.\",\r\n      \"blocking\": true,\r\n      \"handler\" : \"../taskhandlers/testHandler\",\r\n      \"parameters\": {\r\n        \"delay\": 1000,\r\n        \"error\": false\r\n      }\r\n    },\r\n    \"task 3\": {\r\n      \"description\": \"I am the task 3, I take 500msecs.\",\r\n      \"blocking\": true,\r\n      \"handler\" : \"../taskhandlers/testHandler\",\r\n      \"parameters\": {\r\n        \"delay\": 500,\r\n        \"error\": false\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nIf you run this example the 3 tasks will execute as follows.\r\n\r\n```\r\n$ ./bin/processus-cli -l info -f ./test/demo1.json\r\n\r\n  ____  ____   __    ___  ____  ____  ____  _  _  ____\r\n (  _ \\(  _ \\ /  \\  / __)(  __)/ ___)/ ___)/ )( \\/ ___)\r\n  ) __/ )   /(  O )( (__  ) _) \\___  \\___ \\) \\/ (\\___ \\\r\n (__)  (__\\_) \\__/  \\___)(____)(____/(____/\\____/(____/\r\n\r\n           Processus: A Simple Workflow Engine.\r\n\r\ninfo: reading workflow file [./test/demo1.json]\r\ninfo: ⧖ Starting task [task 1]\r\ninfo: ✔ task task 1 completed successfully.\r\ninfo: ⧖ Starting task [task 2]\r\ninfo: ✔ task task 2 completed successfully.\r\ninfo: ⧖ Starting task [task 3]\r\ninfo: ✔ task task 3 completed successfully.\r\ninfo: ✰ Workflow [./test/demo1.json] with id [79893dc3-7bcd-4596-bfc4-3c4380b04775] completed successfully.\r\n```\r\n\r\n[top](#processus)\r\n### Parallel Tasks\r\n\r\nAbove, the tasks were executed in series (i.e. one after the other). It's possible to execute tasks in parallel by setting the ```blocking``` property of a task to ```false```.\r\n\r\nConsider demo2.json\r\n```\r\n{\r\n  \"tasks\":{\r\n    \"task 1\": {\r\n      \"description\": \"I am the task 1, I take 1500msecs.\",\r\n      \"blocking\": false,\r\n      \"handler\" : \"../taskhandlers/testHandler\",\r\n      \"parameters\": {\r\n        \"delay\": 1500,\r\n        \"error\": false\r\n      }\r\n    },\r\n    \"task 2\": {\r\n      \"description\": \"I am the task 2, I take 1000msecs.\",\r\n      \"blocking\": false,\r\n      \"handler\" : \"../taskhandlers/testHandler\",\r\n      \"parameters\": {\r\n        \"delay\": 1000,\r\n        \"error\": false\r\n      }\r\n    },\r\n    \"task 3\": {\r\n      \"description\": \"I am the task 3, I take 500msecs.\",\r\n      \"blocking\": false,\r\n      \"handler\" : \"../taskhandlers/testHandler\",\r\n      \"parameters\": {\r\n        \"delay\": 500,\r\n        \"error\": false\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nExecuting ```demo2.json``` will result in the following.\r\n```\r\n$ ./bin/processus-cli -l info -f ./test/demo2.json\r\n\r\n  ____  ____   __    ___  ____  ____  ____  _  _  ____\r\n (  _ \\(  _ \\ /  \\  / __)(  __)/ ___)/ ___)/ )( \\/ ___)\r\n  ) __/ )   /(  O )( (__  ) _) \\___  \\___ \\) \\/ (\\___ \\\r\n (__)  (__\\_) \\__/  \\___)(____)(____/(____/\\____/(____/\r\n\r\n           Processus: A Simple Workflow Engine.\r\n\r\ninfo: reading workflow file [./test/demo2.json]\r\ninfo: ⧖ Starting task [task 1]\r\ninfo: ⧖ Starting task [task 2]\r\ninfo: ⧖ Starting task [task 3]\r\ninfo: ✔ task task 3 completed successfully.\r\ninfo: ✔ task task 2 completed successfully.\r\ninfo: ✔ task task 1 completed successfully.\r\ninfo: ✰ Workflow [./test/demo2.json] with id [5aac5cff-e2a3-421a-abb8-7d01d564f4d8] completed successfully.\r\n```\r\n***Note***\r\n\r\n1. All 3 tasks started before any had finished\r\n2. The task completed in reverse order because the time difference\r\n\r\n[top](#processus)\r\n### Nested Tasks\r\n\r\nTasks can be nested as shown in ```demo3.json```\r\n\r\n```\r\n{\r\n  \"tasks\":{\r\n    \"task 1\": {\r\n      \"description\": \"I am the task 1, I take 1500msecs.\",\r\n      \"blocking\": true,\r\n      \"handler\" : \"../taskhandlers/testHandler\",\r\n      \"parameters\": {\r\n        \"delay\": 1500,\r\n        \"error\": false\r\n      }\r\n    },\r\n    \"task 2\": {\r\n      \"description\": \"I am the task 2, I take 1000msecs.\",\r\n      \"blocking\": true,\r\n      \"handler\" : \"../taskhandlers/testHandler\",\r\n      \"parameters\": {\r\n        \"delay\": 1000,\r\n        \"error\": false\r\n      },\r\n      \"tasks\": {\r\n        \"task 2-1\": {\r\n          \"description\": \"I am the task 2-1, I take 1000msecs.\",\r\n          \"blocking\": true,\r\n          \"handler\" : \"../taskhandlers/testHandler\",\r\n          \"parameters\": {\r\n            \"delay\": 1000,\r\n            \"error\": false\r\n          }\r\n        },\r\n        \"task 2-2\": {\r\n          \"description\": \"I am the task 2-2, I take 1000msecs.\",\r\n          \"blocking\": true,\r\n          \"handler\" : \"../taskhandlers/testHandler\",\r\n          \"parameters\": {\r\n            \"delay\": 1000,\r\n            \"error\": false\r\n          }\r\n        }\r\n      }\r\n    },\r\n    \"task 3\": {\r\n      \"description\": \"I am the task 3, I take 500msecs.\",\r\n      \"blocking\": true,\r\n      \"handler\" : \"../taskhandlers/testHandler\",\r\n      \"parameters\": {\r\n        \"delay\": 500,\r\n        \"error\": false\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n**Notice** that ```task 2``` contains ```tasks``` itself.\r\nProcessus allows nesting of tasks and does not limit the level of nesting. This is a powerful feature, but it does make some assumptions:\r\n\r\n1. The parent task opens directly after it's previous sibling\r\n2. The parent task CANNOT complete until ALL the child tasks have completed\r\n3. The parent task is therefore not executed until ALL of the children have completed\r\n4. Setting the parent's blocking property to false will NOT prevent it being delayed until\r\nthe child tasks have completed. However, that will cause it to open in parallel with its\r\nsiblings.\r\n\r\nIncidentally this is why a task's ```timeOpened``` time may differ from the ```timeStarted``` time. It's also why the ```totalDuration``` may be different from the ```handlerDuration```.\r\n\r\nRunning the demo\r\n```\r\n$ ./bin/processus-cli -l info -f ./test/demo3.json\r\n\r\n  ____  ____   __    ___  ____  ____  ____  _  _  ____\r\n (  _ \\(  _ \\ /  \\  / __)(  __)/ ___)/ ___)/ )( \\/ ___)\r\n  ) __/ )   /(  O )( (__  ) _) \\___  \\___ \\) \\/ (\\___ \\\r\n (__)  (__\\_) \\__/  \\___)(____)(____/(____/\\____/(____/\r\n\r\n           Processus: A Simple Workflow Engine.\r\n\r\ninfo: reading workflow file [./test/demo3.json]\r\ninfo: ⧖ Starting task [task 1]\r\ninfo: ✔ task task 1 completed successfully.\r\ninfo: ⧖ Starting task [task 2-1]\r\ninfo: ✔ task task 2-1 completed successfully.\r\ninfo: ⧖ Starting task [task 2-2]\r\ninfo: ✔ task task 2-2 completed successfully.\r\ninfo: ⧖ Starting task [task 2]\r\ninfo: ✔ task task 2 completed successfully.\r\ninfo: ⧖ Starting task [task 3]\r\ninfo: ✔ task task 3 completed successfully.\r\ninfo: ✰ Workflow [./test/demo3.json] with id [7e1a009b-024b-4cd9-84f2-0c1fb3fcf9da] completed successfully.\r\n```\r\n\r\n**Notice** that task ```task 2-1``` and ```task 2-2``` are completed before the parent task ```task 2``` is executed.\r\n\r\n[top](#processus)\r\n### referencing Task Parameters\r\n\r\nProcessus supports a very simple mechanism for referencing data between tasks.\r\n\r\nThe format is ```$[<path.to.reference>]```\r\n\r\nFor example, if a task has a data value of ```$[tasks.task 1.parameters.delay]``` this value will be substituted, at execution time, with the value stored in the delay parameters property of task 1.\r\n\r\nConsider demo6.json\r\n```\r\n{\r\n  \"tasks\":{\r\n    \"task 1\": {\r\n      \"description\": \"I am the task 1, I take 1500msecs.\",\r\n      \"blocking\": true,\r\n      \"handler\" : \"../taskhandlers/testHandler\",\r\n      \"parameters\": {\r\n        \"delay\": 1500,\r\n        \"error\": false\r\n      }\r\n    },\r\n    \"task 2\": {\r\n      \"description\": \"I am the task 2, I take as long as task1.\",\r\n      \"blocking\": true,\r\n      \"handler\" : \"../taskhandlers/testHandler\",\r\n      \"parameters\": {\r\n        \"delay\": \"$[tasks.task 1parameters.delay]\",\r\n        \"error\": false\r\n      }\r\n    },\r\n    \"task 3\": {\r\n      \"description\": \"I am the task 3, I take as long as task1.\",\r\n      \"blocking\": true,\r\n      \"handler\" : \"../taskhandlers/testHandler\",\r\n      \"parameters\": {\r\n        \"delay\": \"$[tasks.task 1parameters.delay]\",\r\n        \"error\": false\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nIf you execute ```demo6.json``` in debug mode, you'll see that the delay property of tasks 2 and 3 match that of task 1.\r\n\r\n```\r\n$ ./bin/processus-cli -l debug -f ./test/demo6.json\r\n\r\n  ____  ____   __    ___  ____  ____  ____  _  _  ____\r\n (  _ \\(  _ \\ /  \\  / __)(  __)/ ___)/ ___)/ )( \\/ ___)\r\n  ) __/ )   /(  O )( (__  ) _) \\___  \\___ \\) \\/ (\\___ \\\r\n (__)  (__\\_) \\__/  \\___)(____)(____/(____/\\____/(____/\r\n\r\n           Processus: A Simple Workflow Engine.\r\n\r\ninfo: reading workflow file [./test/demo6.json]\r\n...\r\n[detail removed for clarity]\r\n...\r\ndebug: Workflow returned successfully.\r\ndebug: {\r\n  \"tasks\": {\r\n    \"task 1\": {\r\n      \"description\": \"I am the task 1, I take 1500msecs.\",\r\n      \"blocking\": true,\r\n      \"handler\": \"../taskhandlers/testHandler\",\r\n      \"parameters\": {\r\n        \"delay\": 1500,\r\n        \"error\": false\r\n      },\r\n      \"status\": \"completed\",\r\n      \"timeOpened\": 1447974646175,\r\n      \"timeStarted\": 1447974646176,\r\n      \"timeCompleted\": 1447974647682,\r\n      \"handlerDuration\": 1506,\r\n      \"totalDuration\": 1507\r\n    },\r\n    \"task 2\": {\r\n      \"description\": \"I am the task 2, I take as long as task1.\",\r\n      \"blocking\": true,\r\n      \"handler\": \"../taskhandlers/testHandler\",\r\n      \"parameters\": {\r\n        \"delay\": \"1500\",\r\n        \"error\": false\r\n      },\r\n      \"status\": \"completed\",\r\n      \"timeOpened\": 1447974647685,\r\n      \"timeStarted\": 1447974647687,\r\n      \"timeCompleted\": 1447974649199,\r\n      \"handlerDuration\": 1512,\r\n      \"totalDuration\": 1514\r\n    },\r\n    \"task 3\": {\r\n      \"description\": \"I am the task 3, I take as long as task1.\",\r\n      \"blocking\": true,\r\n      \"handler\": \"../taskhandlers/testHandler\",\r\n      \"parameters\": {\r\n        \"delay\": \"1500\",\r\n        \"error\": false\r\n      },\r\n      \"status\": \"completed\",\r\n      \"timeOpened\": 1447974649203,\r\n      \"timeStarted\": 1447974649204,\r\n      \"timeCompleted\": 1447974650715,\r\n      \"handlerDuration\": 1511,\r\n      \"totalDuration\": 1512\r\n    }\r\n  },\r\n  \"status\": \"completed\",\r\n  \"id\": \"008bebca-a264-4e7e-9bb4-376f979689f6\"\r\n}\r\ninfo: ✰ Workflow [./test/demo6.json] with id [008bebca-a264-4e7e-9bb4-376f979689f6] completed successfully.\r\n```\r\n\r\n[top](#processus)\r\n### Referencing Workflow Parameters\r\n\r\nAs with the earlier example, it's also possible to pass parameters from the parent workflow to each task.\r\n\r\nConsider demo7.json\r\n```\r\n{\r\n  \"parameters\":{\r\n    \"global-delay\":500,\r\n    \"global-error\":false\r\n  },\r\n  \"tasks\":{\r\n    \"task 1\": {\r\n      \"description\": \"I am the task 1, I take global-delay msecs, which is 500msecs.\",\r\n      \"blocking\": true,\r\n      \"handler\" : \"../taskhandlers/testHandler\",\r\n      \"parameters\": {\r\n        \"delay\": \"$[parameters.global-delay]\",\r\n        \"error\": \"$[parameters.global-error]\"\r\n      }\r\n    },\r\n    \"task 2\": {\r\n      \"description\": \"I am the task 2, I take global-delay msecs, which is 500msecs.\",\r\n      \"blocking\": true,\r\n      \"handler\" : \"../taskhandlers/testHandler\",\r\n      \"parameters\": {\r\n        \"delay\": \"$[parameters.global-delay]\",\r\n        \"error\": \"$[parameters.global-error]\"\r\n      }\r\n    },\r\n    \"task 3\": {\r\n      \"description\": \"I am the task 3, I take global-delay msecs, which is 500msecs.\",\r\n      \"blocking\": true,\r\n      \"handler\" : \"../taskhandlers/testHandler\",\r\n      \"parameters\": {\r\n        \"delay\": \"$[parameters.global-delay]\",\r\n        \"error\": \"$[parameters.global-error]\"\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\nIn this case each task's ```delay``` property will be substituted with the ```global-delay``` property of the workflow.\r\n\r\n[top](#processus)\r\n### Handling Errors\r\n\r\nThe ```testHandler``` can force an error. To see the affect this has on the workflow consider demo8.json\r\n\r\n```\r\n{\r\n  \"tasks\":{\r\n    \"task 1\": {\r\n      \"description\": \"I am the task 1, I take 1500msecs.\",\r\n      \"blocking\": true,\r\n      \"handler\" : \"../taskhandlers/testHandler\",\r\n      \"parameters\": {\r\n        \"delay\": 1500,\r\n        \"error\": false\r\n      }\r\n    },\r\n    \"task 2\": {\r\n      \"description\": \"I am the task 2, I take 1000msecs.\",\r\n      \"blocking\": true,\r\n      \"handler\" : \"../taskhandlers/testHandler\",\r\n      \"parameters\": {\r\n        \"delay\": 1000,\r\n        \"error\": true\r\n      }\r\n    },\r\n    \"task 3\": {\r\n      \"description\": \"I am the task 3, I take 1500msecs.\",\r\n      \"blocking\": true,\r\n      \"handler\" : \"../taskhandlers/testHandler\",\r\n      \"parameters\": {\r\n        \"delay\": 1500,\r\n        \"error\": false\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nExecuting ```demo8.json``` results in the following\r\n```\r\n$ ./bin/processus-cli -l debug -f ./test/demo8.json\r\n\r\n  ____  ____   __    ___  ____  ____  ____  _  _  ____\r\n (  _ \\(  _ \\ /  \\  / __)(  __)/ ___)/ ___)/ )( \\/ ___)\r\n  ) __/ )   /(  O )( (__  ) _) \\___  \\___ \\) \\/ (\\___ \\\r\n (__)  (__\\_) \\__/  \\___)(____)(____/(____/\\____/(____/\r\n\r\n           Processus: A Simple Workflow Engine.\r\n\r\ninfo: reading workflow file [./test/demo8.json]\r\ninfo: ⧖ Starting task [task 1]\r\ninfo: ✔ task task 1 completed successfully.\r\ninfo: ⧖ Starting task [task 2]\r\ninfo: ✔ task task 2 completed successfully.\r\nerror: ✘ task [task 2] is raising a deliberate error\r\nerror: ✘ Workflow [./test/demo8.json] with id [81b1f5ae-2975-456c-b281-285f59aeecf0] exited with error!\r\ndebug: {\r\n  \"tasks\": {\r\n    \"task 1\": {\r\n      \"description\": \"I am the task 1, I take 1500msecs.\",\r\n      \"blocking\": true,\r\n      \"handler\": \"../taskhandlers/testHandler\",\r\n      \"parameters\": {\r\n        \"delay\": 1500,\r\n        \"error\": false\r\n      },\r\n      \"status\": \"completed\",\r\n      \"timeOpened\": 1447974502977,\r\n      \"timeStarted\": 1447974502978,\r\n      \"timeCompleted\": 1447974504486,\r\n      \"handlerDuration\": 1508,\r\n      \"totalDuration\": 1509\r\n    },\r\n    \"task 2\": {\r\n      \"description\": \"I am the task 2, I take 1000msecs.\",\r\n      \"blocking\": true,\r\n      \"handler\": \"../taskhandlers/testHandler\",\r\n      \"parameters\": {\r\n        \"delay\": 1000,\r\n        \"error\": true\r\n      },\r\n      \"status\": \"error\",\r\n      \"timeOpened\": 1447974504489,\r\n      \"timeStarted\": 1447974504489,\r\n      \"errorMsg\": \"task [task 2] is raising a deliberate error\"\r\n    },\r\n    \"task 3\": {\r\n      \"description\": \"I am the task 3, I take 1500msecs.\",\r\n      \"blocking\": true,\r\n      \"handler\": \"../taskhandlers/testHandler\",\r\n      \"parameters\": {\r\n        \"delay\": 1500,\r\n        \"error\": false\r\n      },\r\n      \"status\": \"waiting\"\r\n    }\r\n  },\r\n  \"status\": \"error\",\r\n  \"id\": \"81b1f5ae-2975-456c-b281-285f59aeecf0\"\r\n}\r\n```\r\n***Note***\r\n\r\n1.  Task 2 is in the ```error``` state and Processus has added the ```errorMsg``` property\r\n2.  The workflow is also in the ```error``` state.\r\n3.  Task 3 is in the ```waiting``` state.\r\n\r\n[top](#processus)\r\n#### ignoreError Property\r\n\r\nIt's possible for a task to have an ignoreError property. If set to true, any errors for a task will be logged in the ```errorMsg``` property and the task state will be set to ```completed```.\r\n\r\nExecute ```demo8a.json``` to see this in action\r\n```\r\n$ ./bin/processus-cli -l info -f ./test/demo8a.json\r\n\r\n  ____  ____   __    ___  ____  ____  ____  _  _  ____\r\n (  _ \\(  _ \\ /  \\  / __)(  __)/ ___)/ ___)/ )( \\/ ___)\r\n  ) __/ )   /(  O )( (__  ) _) \\___  \\___ \\) \\/ (\\___ \\\r\n (__)  (__\\_) \\__/  \\___)(____)(____/(____/\\____/(____/\r\n\r\n           Processus: A Simple Workflow Engine.\r\n\r\ninfo: reading workflow file [./test/demo8a.json]\r\ninfo: ⧖ Starting task [task 1]\r\ninfo: ✔ task task 1 completed successfully.\r\ninfo: ⧖ Starting task [task 2]\r\ninfo: ✔ task task 2 completed successfully.\r\ninfo: ignoring error, as requested for task [task 2]\r\ninfo: ⧖ Starting task [task 3]\r\ninfo: ✔ task task 3 completed successfully.\r\ninfo: ✰ Workflow [./test/demo8a.json] with id [0f7033d7-3edf-4a8b-a4af-a0bc32c842f3] completed successfully.\r\n\r\n```\r\n\r\n[top](#processus)\r\n### Task Conditions - skipIf and errorIf\r\n\r\nTasks can have the extra properties ```skipIf``` and ```errorIf```.\r\n\r\nAs the names suggest, if either property evaluates to true, then Processus will either skip the task and just mark it as completed or raise an error and stop.\r\n\r\nAs with sharing data values, you can reference another part of the workflow and have that substituted at execution time. Processus will evaluate the string condition and set property appropriately. Any string with the value ```true``` regardless of case, will evaluate to true. Any other string will evaluate to ```false```.\r\n\r\nLook at demo10 to see an example of ```skipIf``` and ```errorIf``` in action.\r\n\r\n```\r\n{\r\n  \"tasks\":{\r\n    \"task 1\": {\r\n      \"description\": \"I am the task 1, I echo Processus\",\r\n      \"blocking\": true,\r\n      \"handler\": \"../taskhandlers/execHandler\",\r\n      \"parameters\": {\r\n        \"cmd\": \"echo Processus\",\r\n        \"skip me\": \"true\"\r\n      }\r\n    },\r\n    \"task 2\": {\r\n      \"description\": \"I am the task 2, I will be skipped\",\r\n      \"blocking\": true,\r\n      \"skipIf\":\"$[tasks.task 1parameters.skip me]\",\r\n      \"handler\": \"../taskhandlers/execHandler\",\r\n      \"parameters\": {\r\n        \"cmd\": \"echo Simple\"\r\n      }\r\n    },\r\n    \"task 3\": {\r\n      \"description\": \"I am the task 3, I will error\",\r\n      \"blocking\": true,\r\n      \"errorIf\": \"$[tasks.task 2.skipIf]\",\r\n      \"handler\": \"../taskhandlers/execHandler\",\r\n      \"parameters\": {\r\n        \"cmd\": \"echo Workflow\"\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n***Note***\r\n\r\n1.  ```skipIf``` of ```task 2``` will evaluate to ```true``` causing this task to be skipped\r\n2.  ```errorIf``` of ```task 3``` will evaluate to the same value of ```skipIf``` of the ```task 2``` causing this task to error\r\n\r\n```\r\n$ ./bin/processus-cli -l info -f test/demo10.json\r\n\r\n  ____  ____   __    ___  ____  ____  ____  _  _  ____\r\n (  _ \\(  _ \\ /  \\  / __)(  __)/ ___)/ ___)/ )( \\/ ___)\r\n  ) __/ )   /(  O )( (__  ) _) \\___  \\___ \\) \\/ (\\___ \\\r\n (__)  (__\\_) \\__/  \\___)(____)(____/(____/\\____/(____/\r\n\r\n           Processus: A Simple Workflow Engine.\r\n\r\ninfo: reading workflow file [test/demo10.json]\r\ninfo: ⧖ Starting task [task 1]\r\ninfo: ✔ task [task 1] completed successfully.\r\ninfo: skipping [task 2]\r\nerror: ✘ Task [task 3] has error condition set.\r\nerror: ✘ Workflow [test/demo10.json] with id [90727723-da21-46e4-8ac3-b5e132b2bab8] exited with error!\r\n```\r\n\r\n[top](#processus)\r\n### Pre and Post Workflow Tasks\r\nWorkflows can contain pre and post events that can execute tasks. These tasks are exactly the same as a normal workflow task, except they will be executed before and after the main workflow. This can be useful for performing pre workflow checks such as parameter validation and post workflow checks to ensure it completed as expected.\r\n\r\nThese tasks MUST have the name ```pre workflow``` and ```post workflow``` for example consider demo18.json\r\n\r\n```\r\n{\r\n  \"name\": \"Demo18\",\r\n  \"description\": \"A demo showing the pre and post tasks.\",\r\n  \"pre workflow\": {\r\n    \"handler\" : \"../taskhandlers/logHandler\",\r\n    \"parameters\": {\r\n      \"level\": \"info\",\r\n      \"log\": \"pre workflow: I will be executed before the main workflow.\"\r\n    }\r\n  },\r\n  \"tasks\":{\r\n    \"task 1\": {\r\n      \"description\": \"task 1\",\r\n      \"blocking\": true,\r\n      \"handler\" : \"../taskhandlers/testHandler\",\r\n      \"parameters\": {\r\n        \"delay\": 1000,\r\n        \"error\": false\r\n      }\r\n    },\r\n    \"task 2\": {\r\n      \"description\": \"task 2\",\r\n      \"blocking\": true,\r\n      \"handler\" : \"../taskhandlers/testHandler\",\r\n      \"parameters\": {\r\n        \"delay\": 1000,\r\n        \"error\": false\r\n      }\r\n    }\r\n  },\r\n  \"post workflow\": {\r\n    \"handler\" : \"../taskhandlers/logHandler\",\r\n    \"parameters\": {\r\n      \"level\": \"info\",\r\n      \"log\": \"post workflow: I will be executed after the main workflow.\"\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nYou should see an output similar to the following\r\n\r\n```\r\n$ ./bin/processus-cli -f test/demo18.json -l info\r\n\r\n  ____  ____   __    ___  ____  ____  ____  _  _  ____\r\n (  _ \\(  _ \\ /  \\  / __)(  __)/ ___)/ ___)/ )( \\/ ___)\r\n  ) __/ )   /(  O )( (__  ) _) \\___  \\___ \\) \\/ (\\___ \\\r\n (__)  (__\\_) \\__/  \\___)(____)(____/(____/\\____/(____/\r\n\r\n           Processus: A Simple Workflow Engine.\r\n\r\ninfo: reading workflow file [test/demo18.json]\r\ninfo: ⧖ Starting task [pre workflow]\r\ninfo: pre workflow: I will be executed before the main workflow.\r\ninfo: ✔ task pre workflow completed successfully.\r\ninfo: ⧖ Starting task [task 1]\r\ninfo: ✔ task task 1 completed successfully.\r\ninfo: ⧖ Starting task [task 2]\r\ninfo: ✔ task task 2 completed successfully.\r\ninfo: ⧖ Starting task [post workflow]\r\ninfo: post workflow: I will be executed after the main workflow.\r\ninfo: ✔ task post workflow completed successfully.\r\ninfo: ✰ Workflow [test/demo18.json] with id [9528a0be-269b-4f4d-a319-9325bf112202] completed successfully.\r\n```\r\n\r\n***Note***\r\n\r\n1. When updating an existing workflow the pre and post events will re-fire.\r\n2. Setting the blocking property is not required as these tasks will always execute before and after the main workflow.\r\n\r\n[top](#processus)\r\n### Environment Variables\r\n\r\nIt's possible to 'inject' environment variables into your workflow.\r\n\r\nConsider ```demo14.json```\r\n```\r\n{\r\n  \"tasks\": {\r\n    \"show env\": {\r\n      \"blocking\": true,\r\n      \"handler\" : \"../taskhandlers/logHandler\",\r\n      \"parameters\": {\r\n        \"level\": \"info\",\r\n        \"log\": \"TEST_ENV = $env[TEST_ENV]\"\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n***Note***\r\n\r\n1. Note that we're using a new handler called ```logHandler``` which, as the name suggests, logs the output supplied.\r\n2. Similar to data referencing, Processus uses the ```$env[<ENVIRONMENT NAME>]``` as a marker for environment variables.\r\n\r\nlooking at the example ```.env``` file used by Processus, we see the following.\r\n```\r\n# persistence env vars\r\nDATA_DIR=\"_data\"\r\nDB_TYPE=\"file\"\r\n\r\n# test env vars\r\nTEST_TASKS_BLOCKING=\"true\"\r\nTEST_ENV=\"HELLO, WORLD\"\r\n```\r\n\r\nTherefore we can conclude that the output of the ```demo14.json``` would be ```TEST_ENV = HELLO, WORLD```\r\n\r\nLet's try it\r\n```\r\n$ ./bin/processus-cli -l info -f test/demo14.json\r\n\r\n  ____  ____   __    ___  ____  ____  ____  _  _  ____\r\n (  _ \\(  _ \\ /  \\  / __)(  __)/ ___)/ ___)/ )( \\/ ___)\r\n  ) __/ )   /(  O )( (__  ) _) \\___  \\___ \\) \\/ (\\___ \\\r\n (__)  (__\\_) \\__/  \\___)(____)(____/(____/\\____/(____/\r\n\r\n           Processus: A Simple Workflow Engine.\r\n\r\ninfo: reading workflow file [test/demo14.json]\r\ninfo: ⧖ Starting task [show env]\r\ninfo: TEST_ENV = HELLO, WORLD\r\ninfo: ✰ Workflow [test/demo14.json] with id [f8442a63-dffd-4247-9eb7-44fac3a4df34] completed successfully.\r\n```\r\n\r\n[top](#processus)\r\n### Workflow History\r\n\r\nProcessus supports the ability to inspect existing workflows and walk back through the history.\r\n\r\nfor example execute ```./bin/processus-cli -l info -f ./test/ex2.json``` and note the resulting workflow id.\r\n\r\n```\r\n$ ./bin/processus-cli -l info -f ./test/ex2.json\r\n\r\n  ____  ____   __    ___  ____  ____  ____  _  _  ____\r\n (  _ \\(  _ \\ /  \\  / __)(  __)/ ___)/ ___)/ )( \\/ ___)\r\n  ) __/ )   /(  O )( (__  ) _) \\___  \\___ \\) \\/ (\\___ \\\r\n (__)  (__\\_) \\__/  \\___)(____)(____/(____/\\____/(____/\r\n\r\n           Processus: A Simple Workflow Engine.\r\n\r\ninfo: reading workflow file [./test/ex2.json]\r\ninfo: ⧖ Starting task [say hello]\r\ninfo: ✔ task [say hello] completed successfully.\r\ninfo: ⧖ Starting task [say hello again]\r\ninfo: ✔ task [say hello again] completed successfully.\r\ninfo: ✰ Workflow [./test/ex2.json] with id [2b04f64a-5556-459c-b73b-257f426ae8ea] completed successfully.\r\n```\r\n\r\nUsing the id (in case 2b04f64a-5556-459c-b73b-257f426ae8ea) you can inspect the workflow by executing:\r\n\r\n```\r\n$ ./bin/processus-cli -l info -i 2b04f64a-5556-459c-b73b-257f426ae8ea\r\n\r\n  ____  ____   __    ___  ____  ____  ____  _  _  ____\r\n (  _ \\(  _ \\ /  \\  / __)(  __)/ ___)/ ___)/ )( \\/ ___)\r\n  ) __/ )   /(  O )( (__  ) _) \\___  \\___ \\) \\/ (\\___ \\\r\n (__)  (__\\_) \\__/  \\___)(____)(____/(____/\\____/(____/\r\n\r\n           Processus: A Simple Workflow Engine.\r\n\r\ninfo: {\r\n  \"tasks\": {\r\n    \"say hello\": {\r\n      \"blocking\": true,\r\n      \"handler\": \"../taskhandlers/execHandler\",\r\n      \"parameters\": {\r\n        \"cmd\": \"echo 'hello, world'\",\r\n        \"stdout\": \"hello, world\\n\",\r\n        \"stderr\": \"\"\r\n      },\r\n      \"status\": \"completed\",\r\n      \"timeOpened\": 1447995324195,\r\n      \"timeStarted\": 1447995324196,\r\n      \"timeCompleted\": 1447995324230,\r\n      \"handlerDuration\": 34,\r\n      \"totalDuration\": 35\r\n    },\r\n    \"say hello again\": {\r\n      \"blocking\": true,\r\n      \"handler\": \"../taskhandlers/execHandler\",\r\n      \"parameters\": {\r\n        \"cmd\": \"echo 'hello, world again'\",\r\n        \"stdout\": \"hello, world again\\n\",\r\n        \"stderr\": \"\"\r\n      },\r\n      \"status\": \"completed\",\r\n      \"timeOpened\": 1447995324234,\r\n      \"timeStarted\": 1447995324234,\r\n      \"timeCompleted\": 1447995324243,\r\n      \"handlerDuration\": 9,\r\n      \"totalDuration\": 9\r\n    }\r\n  },\r\n  \"status\": \"completed\",\r\n  \"id\": \"2b04f64a-5556-459c-b73b-257f426ae8ea\"\r\n}\r\n```\r\n***Note***\r\n\r\n1. by default the current workflow is shown i.e. completed.\r\n2. using the parameter ```--rewind``` we're able to look back through the history of the workflow.\r\n\r\n```\r\n$ ./bin/processus-cli -l info -i 2b04f64a-5556-459c-b73b-257f426ae8ea -r 1\r\n\r\n  ____  ____   __    ___  ____  ____  ____  _  _  ____\r\n (  _ \\(  _ \\ /  \\  / __)(  __)/ ___)/ ___)/ )( \\/ ___)\r\n  ) __/ )   /(  O )( (__  ) _) \\___  \\___ \\) \\/ (\\___ \\\r\n (__)  (__\\_) \\__/  \\___)(____)(____/(____/\\____/(____/\r\n\r\n           Processus: A Simple Workflow Engine.\r\n\r\ninfo: {\r\n  \"tasks\": {\r\n    \"say hello\": {\r\n      \"blocking\": true,\r\n      \"handler\": \"../taskhandlers/execHandler\",\r\n      \"parameters\": {\r\n        \"cmd\": \"echo 'hello, world'\",\r\n        \"stdout\": \"hello, world\\n\",\r\n        \"stderr\": \"\"\r\n      },\r\n      \"status\": \"completed\",\r\n      \"timeOpened\": 1447995324195,\r\n      \"timeStarted\": 1447995324196,\r\n      \"timeCompleted\": 1447995324230,\r\n      \"handlerDuration\": 34,\r\n      \"totalDuration\": 35\r\n    },\r\n    \"say hello again\": {\r\n      \"blocking\": true,\r\n      \"handler\": \"../taskhandlers/execHandler\",\r\n      \"parameters\": {\r\n        \"cmd\": \"echo 'hello, world again'\",\r\n        \"stdout\": \"hello, world again\\n\",\r\n        \"stderr\": \"\"\r\n      },\r\n      \"status\": \"completed\",\r\n      \"timeOpened\": 1447995324234,\r\n      \"timeStarted\": 1447995324234,\r\n      \"timeCompleted\": 1447995324243,\r\n      \"handlerDuration\": 9,\r\n      \"totalDuration\": 9\r\n    }\r\n  },\r\n  \"status\": \"open\",\r\n  \"id\": \"2b04f64a-5556-459c-b73b-257f426ae8ea\"\r\n}\r\n```\r\n\r\nkeep rewinding by increasing the -r number.\r\n\r\n```\r\n$ ./bin/processus-cli -l info -i 2b04f64a-5556-459c-b73b-257f426ae8ea -r 2\r\n\r\n  ____  ____   __    ___  ____  ____  ____  _  _  ____\r\n (  _ \\(  _ \\ /  \\  / __)(  __)/ ___)/ ___)/ )( \\/ ___)\r\n  ) __/ )   /(  O )( (__  ) _) \\___  \\___ \\) \\/ (\\___ \\\r\n (__)  (__\\_) \\__/  \\___)(____)(____/(____/\\____/(____/\r\n\r\n           Processus: A Simple Workflow Engine.\r\n\r\ninfo: {\r\n  \"tasks\": {\r\n    \"say hello\": {\r\n      \"blocking\": true,\r\n      \"handler\": \"../taskhandlers/execHandler\",\r\n      \"parameters\": {\r\n        \"cmd\": \"echo 'hello, world'\",\r\n        \"stdout\": \"hello, world\\n\",\r\n        \"stderr\": \"\"\r\n      },\r\n      \"status\": \"completed\",\r\n      \"timeOpened\": 1447995324195,\r\n      \"timeStarted\": 1447995324196,\r\n      \"timeCompleted\": 1447995324230,\r\n      \"handlerDuration\": 34,\r\n      \"totalDuration\": 35\r\n    },\r\n    \"say hello again\": {\r\n      \"blocking\": true,\r\n      \"handler\": \"../taskhandlers/execHandler\",\r\n      \"parameters\": {\r\n        \"cmd\": \"echo 'hello, world again'\"\r\n      },\r\n      \"status\": \"waiting\"\r\n    }\r\n  },\r\n  \"status\": \"open\",\r\n  \"id\": \"2b04f64a-5556-459c-b73b-257f426ae8ea\"\r\n}\r\n```\r\n\r\n***Note***\r\n\r\n1. The workflow is ```open``` and the last task is ```waiting```\r\n\r\nremind further\r\n\r\n```\r\n$ ./bin/processus-cli -l info -i 2b04f64a-5556-459c-b73b-257f426ae8ea -r 3\r\n\r\n  ____  ____   __    ___  ____  ____  ____  _  _  ____\r\n (  _ \\(  _ \\ /  \\  / __)(  __)/ ___)/ ___)/ )( \\/ ___)\r\n  ) __/ )   /(  O )( (__  ) _) \\___  \\___ \\) \\/ (\\___ \\\r\n (__)  (__\\_) \\__/  \\___)(____)(____/(____/\\____/(____/\r\n\r\n           Processus: A Simple Workflow Engine.\r\n\r\ninfo: {\r\n  \"tasks\": {\r\n    \"say hello\": {\r\n      \"blocking\": true,\r\n      \"handler\": \"../taskhandlers/execHandler\",\r\n      \"parameters\": {\r\n        \"cmd\": \"echo 'hello, world'\"\r\n      },\r\n      \"status\": \"waiting\"\r\n    },\r\n    \"say hello again\": {\r\n      \"blocking\": true,\r\n      \"handler\": \"../taskhandlers/execHandler\",\r\n      \"parameters\": {\r\n        \"cmd\": \"echo 'hello, world again'\"\r\n      },\r\n      \"status\": \"waiting\"\r\n    }\r\n  },\r\n  \"status\": \"open\",\r\n  \"id\": \"2b04f64a-5556-459c-b73b-257f426ae8ea\"\r\n}\r\n```\r\n\r\n***Note***\r\n\r\n1. We now see the workflow when it was first opened.\r\n2. Any attempt to rewind beyond the instantiation of the workflow will result in the following warning ```warn: rewind value [4] is before the workflow started, assuming the oldest [3].```\r\n\r\n[top](#processus)\r\n### Deleting Workflows\r\n\r\nIt's possible to delete workflow instances and it's associated history.\r\n\r\nfor example\r\n```\r\n$ ./bin/processus-cli -l info -d 0567ce60-d927-4017-9ea2-02ffc8744525\r\n\r\n  ____  ____   __    ___  ____  ____  ____  _  _  ____\r\n (  _ \\(  _ \\ /  \\  / __)(  __)/ ___)/ ___)/ )( \\/ ___)\r\n  ) __/ )   /(  O )( (__  ) _) \\___  \\___ \\) \\/ (\\___ \\\r\n (__)  (__\\_) \\__/  \\___)(____)(____/(____/\\____/(____/\r\n\r\n           Processus: A Simple Workflow Engine.\r\n\r\ninfo: successfully deleted workflow [0567ce60-d927-4017-9ea2-02ffc8744525]\r\ninfo: successfully deleted workflow history [_data/0567ce60-d927-4017-9ea2-02ffc8744525_1448041558388]\r\ninfo: successfully deleted workflow history [_data/0567ce60-d927-4017-9ea2-02ffc8744525_1448041558392]\r\ninfo: successfully deleted workflow history [_data/0567ce60-d927-4017-9ea2-02ffc8744525_1448041558394]\r\n```\r\n\r\n***Note***\r\n\r\n1. Any instance matching the supplied UUID and associated history is deleted.\r\n2. It's also possible to deleteALL instances with the ```--deleteALL``` flag\r\n3. See ```demo15.json``` and ```demoDelete.json``` for more examples.\r\n\r\n## API\r\n\r\n[top](#processus)\r\n### execute(workflow, callback)\r\n```\r\n/**\r\n * executes the supplied workflow and calls back with the resulting workflow.\r\n * @param workflow The workflow definition you wish to execute.\r\n * @param callback A function(err, workflow)\r\n */\r\n```\r\n\r\n[top](#processus)\r\n### updateWorkflow(workflowId, tasks, callback)\r\n```\r\n/**\r\n * updates an existing workflow with the supplied tasks. i.e. When a an already\r\n * instantiated workflow has a task in status paused, this function as a callback\r\n * for any async endpoint wishing to respond.\r\n * @param workflowId The UUID of the instantiated workflow\r\n * @param tasks The updated task(s) to be 'injected' into the instantiated workflow\r\n * @param callback A function(err, workflow)\r\n */\r\n```\r\n\r\n[top](#processus)\r\n### setLogLevel(level)\r\n```\r\n/**\r\n * Sets the log level of the Proessus logger. Default is 'error'\r\n * @param level The level [debug|verbose|info|warn|error]\r\n */\r\n```\r\n\r\n[top](#processus)\r\n### getWorkflow(workflowId, rewind, callback)\r\n```\r\n/**\r\n * Gets an existing instance of a workflow\r\n * @param workflowId The UUID of the instantiated workflow to get\r\n * @param rewind through the history of a workflow. i.e. number from 0 last save\r\n*  point, 1 previous save point etc. in continuing reverse chronological order.\r\n * @param callback A function(err, workflow)\r\n */\r\n```\r\n\r\n[top](#processus)\r\n### deleteWorkflow(workflowId, callback)\r\n```\r\n/**\r\n * Delete an existing instance of a workflow\r\n * @param workflowId The UUID of the instantiated workflow to delete\r\n * @param callback A function(err)\r\n */\r\n```\r\n\r\n[top](#processus)\r\n### deleteALL(callback)\r\n```\r\n/**\r\n * Deletes ALL workflow instances\r\n * @param callback A function(err)\r\n */\r\n```\r\n\r\n[top](#processus)\r\n### Handlers\r\n\r\nHandlers are where the real work gets done in Processus and follow a simple interface.\r\n\r\n```\r\nfunction(workflowId, taskName, task, callback, logger)\r\n```\r\n\r\n***Note***\r\n\r\n1.  workflowId is the UUID assigned to this instance of the workflow\r\n2.  taskName is the name of the task\r\n3.  task is an object containing all the properties of the task\r\n4.  callback consists of an error object (or null) and the updated task\r\n\r\nProcessus comes with a number of task handlers. It's recommended that you study these, should you wish to write or extend your own.\r\n\r\n[top](#processus)\r\n#### execHandler\r\n```\r\n/* Exec Handler\r\n * Using the Task's parameters.cmd property, this handler will attempt to execute that command as a child process. To spawn a detached command use background = true and arguments parameters described below.\r\n output is stored in parameters.stdout and parameters.stderr (unless background = true)\r\n\r\n * Task INPUT\r\n * @param task.parameters.cmd The command to execute\r\n * @param task.parameters.background Set true to spawn and detach the process\r\n    Note: detached processes will write stdout and stderr to [workflowId].logger\r\n * @param task.parameters.arguments Set to an array of arguments\r\n    Note: arguments are only required for background (spawned) commands\r\n * Task OUTPUT\r\n * @param task.parameters.stdout The stdout (if any)\r\n * @param task.parameters.stderr The stderr (if any)\r\n * @param task.parameters.pid The child process (if background is true)\r\n *\r\n */\r\n```\r\n\r\nAbove, you've already seen the execHandler in action. Consider the ```background.yml``` file as an example of executing a background workflow.\r\n\r\n```\r\n---\r\n  name: background example\r\n  description: A demo execHandler spawning a detached process.\r\n  tasks:\r\n    task 1:\r\n      description: \"exec background process\"\r\n      blocking: true\r\n      handler: \"../taskhandlers/execHandler\"\r\n      parameters:\r\n        background: true\r\n        cmd: \"./bin/processus-cli\"\r\n        arguments:\r\n          - -f\r\n          - ./test/demo1.yml\r\n          - -l\r\n          - info\r\n```\r\n***Note***\r\n\r\n1. When setting background to true, you must supply an array of arguments\r\n2. The pid of the detached process is returned\r\n3. The stdout and stderr are written to a log file in the current directory with the name [workflowId].log\r\n\r\n[top](#processus)\r\n#### logHandler\r\n```\r\n/* Log Handler\r\n * Logs a the supplied message\r\n * INPUT\r\n * @param task.parameters.level The log level\r\n * @param task.parameters.log The message to log\r\n */\r\n```\r\n\r\n[top](#processus)\r\n#### testHandler\r\n```\r\n/* Test Handler\r\n * Used to test tasks within a workflow\r\n * INPUT\r\n * @param task.parameters.error Set true to simulate an error\r\n * @param task.parameters.delay Set delay time (msecs) to simulate execution before returning\r\n * @param task.parameters.paused Set true to simulate a paused status returned from a module\r\n*/\r\n```\r\n\r\n[top](#processus)\r\n#### requestHandler\r\n```\r\n/* Request Handler\r\n * A processus wrapper for the amazing module request.\r\n * See https://github.com/request/request#requestoptions-callback for parameters.options\r\n * INPUT\r\n * @param task.parameters.options The options object used by the request module\r\n * OUTPUT\r\n * @param task.parameters.response The response object returned from the request\r\n * @param task.parameters.body The body object returned from the request\r\n *\r\n */\r\n```\r\n\r\nThis handler wraps the very popular nodejs module request to make HTTP requests. Simply supply a ```parameters.options``` property to the task to see the resulting HTTP request made. ```demo12.json``` is an example of this.\r\n\r\n```\r\n{\r\n  \"tasks\": {\r\n    \"call github for demo1\": {\r\n      \"blocking\": true,\r\n      \"handler\": \"../taskhandlers/requestHandler\",\r\n      \"parameters\": {\r\n        \"options\": {\r\n            \"url\": \"https://raw.githubusercontent.com/cloudb2/processus/master/test/demo1.json\",\r\n            \"method\": \"GET\",\r\n            \"json\": true\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nexecuting this demo will result in the request and body objects being populated in the task ```call github for demo1``` by the http request to\r\n```\r\nhttps://raw.githubusercontent.com/cloudb2/processus/master/test/demo1.json\r\n```\r\n\r\n```\r\n$ ./bin/processus-cli -l debug -f test/demo12.json\r\n\r\n  ____  ____   __    ___  ____  ____  ____  _  _  ____\r\n (  _ \\(  _ \\ /  \\  / __)(  __)/ ___)/ ___)/ )( \\/ ___)\r\n  ) __/ )   /(  O )( (__  ) _) \\___  \\___ \\) \\/ (\\___ \\\r\n (__)  (__\\_) \\__/  \\___)(____)(____/(____/\\____/(____/\r\n\r\n           Processus: A Simple Workflow Engine.\r\n\r\ninfo: reading workflow file [test/demo12.json]\r\n...\r\n[detail removed for simplicity]\r\n...\r\ndebug: Workflow returned successfully.\r\ndebug: {\r\n  \"tasks\": {\r\n    \"call github for demo1\": {\r\n      \"blocking\": true,\r\n      \"handler\": \"../taskhandlers/requestHandler\",\r\n      \"parameters\": {\r\n        \"options\": {\r\n          \"url\": \"https://raw.githubusercontent.com/cloudb2/processus/master/test/demo1.json\",\r\n          \"method\": \"GET\",\r\n          \"json\": true\r\n        },\r\n        \"response\": {\r\n          \"statusCode\": 200,\r\n          \"body\": {\r\n            \"tasks\": {\r\n              \"task 1\": {\r\n                \"description\": \"I am the task 1, I take 1500msecs.\",\r\n                \"blocking\": true,\r\n                \"handler\": \"../taskhandlers/testHandler\",\r\n                \"parameters\": {\r\n                  \"delay\": 1500,\r\n                  \"error\": false\r\n                }\r\n              },\r\n              \"task 2\": {\r\n                \"description\": \"I am the task 2, I take 1000msecs.\",\r\n                \"blocking\": true,\r\n                \"handler\": \"../taskhandlers/testHandler\",\r\n                \"parameters\": {\r\n                  \"delay\": 1000,\r\n                  \"error\": false\r\n                }\r\n              },\r\n              \"task 3\": {\r\n                \"description\": \"I am the task 3, I take 500msecs.\",\r\n                \"blocking\": true,\r\n                \"handler\": \"../taskhandlers/testHandler\",\r\n                \"parameters\": {\r\n                  \"delay\": 500,\r\n                  \"error\": false\r\n                }\r\n              }\r\n            }\r\n          },\r\n          \"headers\": {\r\n            \"content-security-policy\": \"default-src 'none'\",\r\n            \"x-xss-protection\": \"1; mode=block\",\r\n            \"x-frame-options\": \"deny\",\r\n            \"x-content-type-options\": \"nosniff\",\r\n            \"strict-transport-security\": \"max-age=31536000\",\r\n            \"etag\": \"\\\"e1fcf909fd53a8f6fa2e085835e59fba51f1344b\\\"\",\r\n            \"content-type\": \"text/plain; charset=utf-8\",\r\n            \"cache-control\": \"max-age=300\",\r\n            \"x-github-request-id\": \"17EB2F18:5094:7EDF2C9:564E55CB\",\r\n            \"content-length\": \"692\",\r\n            \"accept-ranges\": \"bytes\",\r\n            \"date\": \"Thu, 19 Nov 2015 23:05:48 GMT\",\r\n            \"via\": \"1.1 varnish\",\r\n            \"connection\": \"close\",\r\n            \"x-served-by\": \"cache-sjc3123-SJC\",\r\n            \"x-cache\": \"MISS\",\r\n            \"x-cache-hits\": \"0\",\r\n            \"vary\": \"Authorization,Accept-Encoding\",\r\n            \"access-control-allow-origin\": \"*\",\r\n            \"x-fastly-request-id\": \"04ac282da1afb0e12aa3f6fe448450aabedf083a\",\r\n            \"expires\": \"Thu, 19 Nov 2015 23:10:48 GMT\",\r\n            \"source-age\": \"0\"\r\n          },\r\n          \"request\": {\r\n            \"uri\": {\r\n              \"protocol\": \"https:\",\r\n              \"slashes\": true,\r\n              \"auth\": null,\r\n              \"host\": \"raw.githubusercontent.com\",\r\n              \"port\": 443,\r\n              \"hostname\": \"raw.githubusercontent.com\",\r\n              \"hash\": null,\r\n              \"search\": null,\r\n              \"query\": null,\r\n              \"pathname\": \"/cloudb2/processus/master/test/demo1.json\",\r\n              \"path\": \"/cloudb2/processus/master/test/demo1.json\",\r\n              \"href\": \"https://raw.githubusercontent.com/cloudb2/processus/master/test/demo1.json\"\r\n            },\r\n            \"method\": \"GET\",\r\n            \"headers\": {\r\n              \"accept\": \"application/json\"\r\n            }\r\n          }\r\n        },\r\n        \"body\": {\r\n          \"tasks\": {\r\n            \"task 1\": {\r\n              \"description\": \"I am the task 1, I take 1500msecs.\",\r\n              \"blocking\": true,\r\n              \"handler\": \"../taskhandlers/testHandler\",\r\n              \"parameters\": {\r\n                \"delay\": 1500,\r\n                \"error\": false\r\n              }\r\n            },\r\n            \"task 2\": {\r\n              \"description\": \"I am the task 2, I take 1000msecs.\",\r\n              \"blocking\": true,\r\n              \"handler\": \"../taskhandlers/testHandler\",\r\n              \"parameters\": {\r\n                \"delay\": 1000,\r\n                \"error\": false\r\n              }\r\n            },\r\n            \"task 3\": {\r\n              \"description\": \"I am the task 3, I take 500msecs.\",\r\n              \"blocking\": true,\r\n              \"handler\": \"../taskhandlers/testHandler\",\r\n              \"parameters\": {\r\n                \"delay\": 500,\r\n                \"error\": false\r\n              }\r\n            }\r\n          }\r\n        }\r\n      },\r\n      \"status\": \"completed\",\r\n      \"timeOpened\": 1447974347653,\r\n      \"timeStarted\": 1447974347654,\r\n      \"timeCompleted\": 1447974348486,\r\n      \"handlerDuration\": 832,\r\n      \"totalDuration\": 833\r\n    }\r\n  },\r\n  \"status\": \"completed\",\r\n  \"id\": \"60946ca2-af30-4a78-babb-3b1d80a09ed2\"\r\n}\r\ninfo: ✰ Workflow [test/demo12.json] with id [60946ca2-af30-4a78-babb-3b1d80a09ed2] completed successfully.\r\n```\r\n\r\n[top](#processus)\r\n#### workflowHandler\r\n```\r\n/* Workflow Handler\r\n * This handle will attempt to load supplied file or execute the supplied workflow\r\n * INPUT\r\n * @param task.parameters.file The workflow definition file name (if no workflow supplied)\r\n * @param task.parameters.workflow A workflow object to execute\r\n * OUTPUT\r\n * @param task.parameters.workflow The resulting workflow object\r\n */\r\n```\r\n\r\nThe workflowHandler allows a task to call another workflow. ```demo13.json``` shows an example of this.\r\n\r\n```\r\n{\r\n  \"tasks\": {\r\n    \"call demo1 workflow\": {\r\n      \"description\": \"calls the workflow in the file demo1\",\r\n      \"blocking\": true,\r\n      \"handler\" : \"../taskhandlers/workflowHandler\",\r\n      \"parameters\": {\r\n        \"file\": \"./test/demo1.json\"\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nRunning this shows how workflows can be nested.\r\n\r\n```\r\n$ ./bin/processus-cli -l debug -f test/demo13.json\r\n\r\n  ____  ____   __    ___  ____  ____  ____  _  _  ____\r\n (  _ \\(  _ \\ /  \\  / __)(  __)/ ___)/ ___)/ )( \\/ ___)\r\n  ) __/ )   /(  O )( (__  ) _) \\___  \\___ \\) \\/ (\\___ \\\r\n (__)  (__\\_) \\__/  \\___)(____)(____/(____/\\____/(____/\r\n\r\n           Processus: A Simple Workflow Engine.\r\n\r\ninfo: reading workflow file [test/demo13.json]\r\n...\r\n[detail removed for simplicity]\r\n...\r\ndebug: Workflow returned successfully.\r\ndebug: {\r\n  \"tasks\": {\r\n    \"call demo1 workflow\": {\r\n      \"description\": \"calls the workflow in the file demo1\",\r\n      \"blocking\": true,\r\n      \"handler\": \"../taskhandlers/workflowHandler\",\r\n      \"parameters\": {\r\n        \"file\": \"./test/demo1.json\",\r\n        \"workflow\": {\r\n          \"tasks\": {\r\n            \"task 1\": {\r\n              \"description\": \"I am the task 1, I take 1500msecs.\",\r\n              \"blocking\": true,\r\n              \"handler\": \"../taskhandlers/testHandler\",\r\n              \"parameters\": {\r\n                \"delay\": 1500,\r\n                \"error\": false\r\n              },\r\n              \"status\": \"completed\",\r\n              \"timeOpened\": 1447974254582,\r\n              \"timeStarted\": 1447974254582,\r\n              \"timeCompleted\": 1447974256088,\r\n              \"handlerDuration\": 1506,\r\n              \"totalDuration\": 1506\r\n            },\r\n            \"task 2\": {\r\n              \"description\": \"I am the task 2, I take 1000msecs.\",\r\n              \"blocking\": true,\r\n              \"handler\": \"../taskhandlers/testHandler\",\r\n              \"parameters\": {\r\n                \"delay\": 1000,\r\n                \"error\": false\r\n              },\r\n              \"status\": \"completed\",\r\n              \"timeOpened\": 1447974256090,\r\n              \"timeStarted\": 1447974256091,\r\n              \"timeCompleted\": 1447974257093,\r\n              \"handlerDuration\": 1002,\r\n              \"totalDuration\": 1003\r\n            },\r\n            \"task 3\": {\r\n              \"description\": \"I am the task 3, I take 500msecs.\",\r\n              \"blocking\": true,\r\n              \"handler\": \"../taskhandlers/testHandler\",\r\n              \"parameters\": {\r\n                \"delay\": 500,\r\n                \"error\": false\r\n              },\r\n              \"status\": \"completed\",\r\n              \"timeOpened\": 1447974257095,\r\n              \"timeStarted\": 1447974257096,\r\n              \"timeCompleted\": 1447974257602,\r\n              \"handlerDuration\": 506,\r\n              \"totalDuration\": 507\r\n            }\r\n          },\r\n          \"status\": \"completed\",\r\n          \"id\": \"c29d5d5b-beeb-45d5-abe9-c8d15ea6bf0e\"\r\n        }\r\n      },\r\n      \"status\": \"completed\",\r\n      \"timeOpened\": 1447974254576,\r\n      \"timeStarted\": 1447974254577,\r\n      \"timeCompleted\": 1447974257605,\r\n      \"handlerDuration\": 3028,\r\n      \"totalDuration\": 3029\r\n    }\r\n  },\r\n  \"status\": \"completed\",\r\n  \"id\": \"e9898256-b00d-47ca-bcea-2ed314296e89\"\r\n}\r\ninfo: ✰ Workflow [test/demo13.json] with id [e9898256-b00d-47ca-bcea-2ed314296e89] completed successfully.\r\n```\r\n\r\n***Note***\r\n\r\n1.  the parent workflow contains one task ```call demo1 workflow``` which contains the ```parameters.workflow``` property which contains the resulting ```demo1.json``` workflow.\r\n\r\n[top](#processus)\r\n#### conditionHandler\r\n\r\n```\r\n/* Condition Handler\r\n * A very simple condition evaluation handler for non programmers\r\n * INPUT\r\n * @param task.parameters.conditions Condition objects consisting of\r\n  \"[condition name]\"{\r\n    \"valueA\":[ValueA],\r\n    \"operator\":[operator],\r\n    \"valueB\":[valueB]\r\n  }\r\n * where [operator] must be one of the following:\r\n * \"IS\", \"EQUALS\", \"=\", \"MATCH\"\r\n * \"IS NOT\", \"NOT EQUALS\", \"!=\", \"NOT MATCH\",\r\n * \"GREATER THAN\", \">\",\r\n * \"LESS THAN\", \"<\",\r\n * \"GREATER OR EQUALS\", \">=\",\r\n * \"LESS OR EQUALS\", \"<=\"\r\n * (note case is ignored)\r\n * OUTPUT\r\n * @param task.parameters.conditions each condition is updated to include a result e.g.\r\n \"[condition name]\"{\r\n   \"valueA\":[ValueA],\r\n   \"operator\":[operator],\r\n   \"valueB\":[valueB],\r\n   \"valid\": [true if condition is valid],\r\n   \"invalid\": [true if condition is invalid]\r\n }\r\n * @param task.parameters.anyValid true if ANY condition evaluates to true\r\n * @param task.parameters.allValid true if ALL conditions evaluate to true\r\n * @param task.parameters.notAnyValid convenience property to show !anyValid\r\n * @param task.parameters.notAllValid convenience property to show !allValid\r\n */\r\n```\r\n\r\n***Note***\r\n\r\nSee ```demo17``` for an example of how the ```conditionHandler``` and it's results are used\r\nfor driving the ```skipIf``` property of subsequent tasks, thus controlling execution flow.\r\n\r\n[top](#processus)\r\n#### expectHandler\r\n\r\n```\r\n/* Expect Handler\r\n * A wraper for node expect module\r\n * see https://github.com/mjackson/expect for usage\r\n * supported expect functions are:\r\n * toExist\r\n * toNotExist\r\n * toBe\r\n * toNotBe\r\n * toEqual\r\n * toNotEqual\r\n * toBeA\r\n * toNotBeA\r\n * toMatch\r\n * toBeLessThan\r\n * toBeGreaterThan\r\n * toInclude\r\n * toExclude\r\n *\r\n * INPUT\r\n * @param task.parameters.expectations is an object consisting of expects. e.g.\r\n     [expect function]{\r\n       \"object\": [object to test],\r\n       \"value\":  [value to expect],\r\n       \"message\": [A message to return upon failure]\r\n     }\r\n * OUTPUT\r\n * if task.ignoreError = false\r\n *    Each expect object is furnished with an assertion true or an error\r\n * if task.ignoreError = true\r\n *    Each expect object is furnished with an assertion true or false (errors are suppressed)\r\n *\r\n     [expect function]{\r\n       \"object\": [object to test],\r\n       \"value\":  [value to expect],\r\n       \"message\": [A message to return upon failure]\r\n       \"assertion\": [true | false]\r\n     }\r\n */\r\n```\r\n\r\nSee ```expectations.json``` for an example of how the use the ```expectHandler```","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}